<!--<!DOCTYPE html>-->
<!--<html lang="ru" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${pageTitle}">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—É—Ä–∞</title>-->

<!--    <style>-->
<!--        .booking-container {-->
<!--            max-width: 1200px;-->
<!--            margin: 0 auto;-->
<!--            padding: 20px;-->
<!--            background: #f8f9fa;-->
<!--        }-->

<!--        .booking-header {-->
<!--            background: white;-->
<!--            padding: 30px;-->
<!--            border-radius: 12px;-->
<!--            margin-bottom: 30px;-->
<!--            box-shadow: 0 2px 10px rgba(0,0,0,0.1);-->
<!--        }-->

<!--        .tour-summary {-->
<!--            display: grid;-->
<!--            grid-template-columns: 1fr auto;-->
<!--            gap: 20px;-->
<!--            align-items: center;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .vehicle-summary {-->
<!--            background: #f8f9fa;-->
<!--            padding: 20px;-->
<!--            border-radius: 8px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .booking-form {-->
<!--            background: white;-->
<!--            padding: 30px;-->
<!--            border-radius: 12px;-->
<!--            box-shadow: 0 2px 10px rgba(0,0,0,0.1);-->
<!--        }-->

<!--        .form-section {-->
<!--            margin-bottom: 30px;-->
<!--            padding-bottom: 20px;-->
<!--            border-bottom: 1px solid #eee;-->
<!--        }-->

<!--        .form-section:last-child {-->
<!--            border-bottom: none;-->
<!--            margin-bottom: 0;-->
<!--        }-->

<!--        .section-title {-->
<!--            font-size: 1.3em;-->
<!--            font-weight: 600;-->
<!--            color: #333;-->
<!--            margin-bottom: 20px;-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            gap: 10px;-->
<!--        }-->

<!--        .form-group {-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .form-row {-->
<!--            display: grid;-->
<!--            grid-template-columns: 1fr 1fr;-->
<!--            gap: 20px;-->
<!--        }-->

<!--        .form-control {-->
<!--            width: 100%;-->
<!--            padding: 12px 16px;-->
<!--            border: 2px solid #e1e5e9;-->
<!--            border-radius: 8px;-->
<!--            font-size: 16px;-->
<!--            transition: border-color 0.3s ease;-->
<!--        }-->

<!--        .form-control:focus {-->
<!--            outline: none;-->
<!--            border-color: #007bff;-->
<!--            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);-->
<!--        }-->

<!--        .form-control.error {-->
<!--            border-color: #dc3545;-->
<!--        }-->

<!--        .error-message {-->
<!--            color: #dc3545;-->
<!--            font-size: 14px;-->
<!--            margin-top: 5px;-->
<!--        }-->

<!--        .checkbox-group {-->
<!--            display: flex;-->
<!--            align-items: center;-->
<!--            gap: 10px;-->
<!--            margin-bottom: 15px;-->
<!--        }-->

<!--        .checkbox-group input[type="checkbox"] {-->
<!--            width: 18px;-->
<!--            height: 18px;-->
<!--            accent-color: #007bff;-->
<!--        }-->

<!--        .price-summary {-->
<!--            background: #e8f4f8;-->
<!--            padding: 20px;-->
<!--            border-radius: 8px;-->
<!--            margin-bottom: 20px;-->
<!--            border-left: 4px solid #007bff;-->
<!--        }-->

<!--        .submit-section {-->
<!--            display: flex;-->
<!--            gap: 15px;-->
<!--            justify-content: flex-end;-->
<!--            margin-top: 30px;-->
<!--        }-->

<!--        .btn {-->
<!--            padding: 12px 24px;-->
<!--            border-radius: 8px;-->
<!--            font-size: 16px;-->
<!--            font-weight: 500;-->
<!--            text-decoration: none;-->
<!--            border: none;-->
<!--            cursor: pointer;-->
<!--            transition: all 0.3s ease;-->
<!--            display: inline-flex;-->
<!--            align-items: center;-->
<!--            gap: 8px;-->
<!--        }-->

<!--        .btn-primary {-->
<!--            background: #007bff;-->
<!--            color: white;-->
<!--        }-->

<!--        .btn-primary:hover {-->
<!--            background: #0056b3;-->
<!--            transform: translateY(-1px);-->
<!--        }-->

<!--        .btn-secondary {-->
<!--            background: #6c757d;-->
<!--            color: white;-->
<!--        }-->

<!--        .btn-secondary:hover {-->
<!--            background: #545b62;-->
<!--        }-->

<!--        .alert {-->
<!--            padding: 15px;-->
<!--            border-radius: 8px;-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .alert-error {-->
<!--            background: #f8d7da;-->
<!--            color: #721c24;-->
<!--            border: 1px solid #f5c6cb;-->
<!--        }-->

<!--        .breadcrumbs {-->
<!--            margin-bottom: 20px;-->
<!--        }-->

<!--        .breadcrumbs a {-->
<!--            color: #007bff;-->
<!--            text-decoration: none;-->
<!--            margin-right: 10px;-->
<!--        }-->

<!--        .breadcrumbs span {-->
<!--            color: #6c757d;-->
<!--            margin-right: 10px;-->
<!--        }-->

<!--        @media (max-width: 768px) {-->
<!--            .tour-summary {-->
<!--                grid-template-columns: 1fr;-->
<!--            }-->

<!--            .form-row {-->
<!--                grid-template-columns: 1fr;-->
<!--            }-->

<!--            .submit-section {-->
<!--                flex-direction: column;-->
<!--            }-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->
<!--<th:block th:replace="~{fragments/navbar :: navbar('booking')}"></th:block>-->

<!--<div class="booking-container">-->
<!--    &lt;!&ndash; –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ &ndash;&gt;-->
<!--    <div class="breadcrumbs">-->
<!--        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>-->
<!--        <span>‚Üí</span>-->
<!--        <a href="/tours">–¢—É—Ä—ã</a>-->
<!--        <span>‚Üí</span>-->
<!--        <a href="#" th:href="@{'/tours/' + ${tour.id}}" th:text="${tour.title}">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞</a>-->
<!--        <span>‚Üí</span>-->
<!--        <span>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>-->
<!--    </div>-->

<!--    &lt;!&ndash; –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö &ndash;&gt;-->
<!--    <div th:if="${error}" class="alert alert-error">-->
<!--        <span th:text="${error}">–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ</span>-->
<!--    </div>-->

<!--    &lt;!&ndash; –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç—É—Ä–µ &ndash;&gt;-->
<!--    <div class="booking-header">-->
<!--        <div class="tour-summary">-->
<!--            <div>-->
<!--                <h1 th:text="${tour.title}">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞</h1>-->
<!--                <div style="display: flex; gap: 20px; margin: 10px 0; color: #666;">-->
<!--                    <span>üïê <span th:text="${tour.duration ?: '8 —á–∞—Å–æ–≤'}">8 —á–∞—Å–æ–≤</span></span>-->
<!--                    <span>üë• –î–æ <span th:text="${tour.maxParticipants ?: '8'}">8</span> —á–µ–ª–æ–≤–µ–∫</span>-->
<!--                    <span>üó£Ô∏è <span th:text="${tour.language ?: '–†—É—Å—Å–∫–∏–π –≥–∏–¥'}">–†—É—Å—Å–∫–∏–π –≥–∏–¥</span></span>-->
<!--                </div>-->
<!--                <p th:if="${tour.description}" th:text="${tour.description}" style="color: #666; margin-top: 10px;">-->
<!--                    –û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–∞-->
<!--                </p>-->
<!--            </div>-->
<!--            <div class="price-summary">-->
<!--                <div style="text-align: center;">-->
<!--                    <div style="font-size: 1.1em; color: #666;">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç—É—Ä–∞</div>-->
<!--                    <div style="font-size: 2em; font-weight: bold; color: #007bff;" th:text="${estimatedPrice ?: tour.price} + ' ‚Ç¨'">-->
<!--                        120 ‚Ç¨-->
<!--                    </div>-->
<!--                    <div style="font-size: 0.9em; color: #666;">–∑–∞ –≥—Ä—É–ø–ø—É</div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ &ndash;&gt;-->
<!--        <div class="vehicle-summary">-->
<!--            <h3 style="margin: 0 0 15px 0; color: #333;">üöó –í—ã–±—Ä–∞–Ω–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å</h3>-->
<!--            <div style="display: grid; grid-template-columns: auto 1fr auto; gap: 15px; align-items: center;">-->
<!--                <img th:if="${selectedVehicle.imageUrl}"-->
<!--                     th:src="${selectedVehicle.imageUrl}"-->
<!--                     th:alt="${selectedVehicle.brand + ' ' + selectedVehicle.model}"-->
<!--                     style="width: 80px; height: 60px; object-fit: cover; border-radius: 6px;">-->
<!--                <div>-->
<!--                    <div style="font-weight: 600; font-size: 1.1em;"-->
<!--                         th:text="${selectedVehicle.brand + ' ' + selectedVehicle.model + (selectedVehicle.year != null ? ' (' + selectedVehicle.year + ')' : '')}">-->
<!--                        Mercedes Vito (2023)-->
<!--                    </div>-->
<!--                    <div style="color: #666; font-size: 0.9em;">-->
<!--                        <span th:text="${selectedVehicle.passengerCapacity + ' –º–µ—Å—Ç'}">7 –º–µ—Å—Ç</span>-->
<!--                        <span th:if="${selectedVehicle.vehicleClass}"-->
<!--                              th:text="' ‚Ä¢ ' + ${selectedVehicle.vehicleClass.displayName}"> ‚Ä¢ –ö–æ–º—Ñ–æ—Ä—Ç</span>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <a href="#" onclick="window.history.back()" class="btn btn-secondary" style="font-size: 0.9em; padding: 8px 16px;">-->
<!--                    –ò–∑–º–µ–Ω–∏—Ç—å-->
<!--                </a>-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->

<!--    &lt;!&ndash; –§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è &ndash;&gt;-->
<!--    <form th:action="@{/booking/tour/create}" th:object="${tourBookingDTO}" method="post" class="booking-form">-->

<!--        &lt;!&ndash; –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è &ndash;&gt;-->
<!--        <input type="hidden" th:field="*{tourId}">-->
<!--        <input type="hidden" th:field="*{vehicleId}">-->
<!--        <input type="hidden" th:field="*{tripType}">-->

<!--        &lt;!&ndash; –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ç—É—Ä–∞ &ndash;&gt;-->
<!--        <div class="form-section">-->
<!--            <h3 class="section-title">üìÖ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ç—É—Ä–∞</h3>-->
<!--            <div class="form-group">-->
<!--                <label for="tourDateTime">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ç—É—Ä–∞ *</label>-->
<!--                <input type="datetime-local"-->
<!--                       id="tourDateTime"-->
<!--                       th:field="*{tourDateTime}"-->
<!--                       class="form-control"-->
<!--                       th:classappend="${#fields.hasErrors('tourDateTime')} ? 'error' : ''"-->
<!--                       required>-->
<!--                <div th:if="${#fields.hasErrors('tourDateTime')}"-->
<!--                     th:errors="*{tourDateTime}"-->
<!--                     class="error-message"></div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ &ndash;&gt;-->
<!--        <div class="form-section">-->
<!--            <h3 class="section-title">üë• –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤</h3>-->
<!--            <div class="form-row">-->
<!--                <div class="form-group">-->
<!--                    <label for="adultCount">–í–∑—Ä–æ—Å–ª—ã–µ *</label>-->
<!--                    <input type="number"-->
<!--                           id="adultCount"-->
<!--                           th:field="*{adultCount}"-->
<!--                           class="form-control"-->
<!--                           th:classappend="${#fields.hasErrors('adultCount')} ? 'error' : ''"-->
<!--                           min="1" max="20" required>-->
<!--                    <div th:if="${#fields.hasErrors('adultCount')}"-->
<!--                         th:errors="*{adultCount}"-->
<!--                         class="error-message"></div>-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <label for="childCount">–î–µ—Ç–∏ (–¥–æ 12 –ª–µ—Ç)</label>-->
<!--                    <input type="number"-->
<!--                           id="childCount"-->
<!--                           th:field="*{childCount}"-->
<!--                           class="form-control"-->
<!--                           th:classappend="${#fields.hasErrors('childCount')} ? 'error' : ''"-->
<!--                           min="0" max="10">-->
<!--                    <div th:if="${#fields.hasErrors('childCount')}"-->
<!--                         th:errors="*{childCount}"-->
<!--                         class="error-message"></div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è &ndash;&gt;-->
<!--        <div class="form-section">-->
<!--            <h3 class="section-title">üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>-->
<!--            <div class="form-group">-->
<!--                <label for="customerName">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è *</label>-->
<!--                <input type="text"-->
<!--                       id="customerName"-->
<!--                       th:field="*{customerName}"-->
<!--                       class="form-control"-->
<!--                       th:classappend="${#fields.hasErrors('customerName')} ? 'error' : ''"-->
<!--                       placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é" required>-->
<!--                <div th:if="${#fields.hasErrors('customerName')}"-->
<!--                     th:errors="*{customerName}"-->
<!--                     class="error-message"></div>-->
<!--            </div>-->

<!--            <div class="form-row">-->
<!--                <div class="form-group">-->
<!--                    <label for="customerEmail">Email *</label>-->
<!--                    <input type="email"-->
<!--                           id="customerEmail"-->
<!--                           th:field="*{customerEmail}"-->
<!--                           class="form-control"-->
<!--                           th:classappend="${#fields.hasErrors('customerEmail')} ? 'error' : ''"-->
<!--                           placeholder="your@email.com" required>-->
<!--                    <div th:if="${#fields.hasErrors('customerEmail')}"-->
<!--                         th:errors="*{customerEmail}"-->
<!--                         class="error-message"></div>-->
<!--                </div>-->

<!--                <div class="form-group">-->
<!--                    <label for="customerPhone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>-->
<!--                    <input type="tel"-->
<!--                           id="customerPhone"-->
<!--                           th:field="*{customerPhone}"-->
<!--                           class="form-control"-->
<!--                           th:classappend="${#fields.hasErrors('customerPhone')} ? 'error' : ''"-->
<!--                           placeholder="+1234567890" required>-->
<!--                    <div th:if="${#fields.hasErrors('customerPhone')}"-->
<!--                         th:errors="*{customerPhone}"-->
<!--                         class="error-message"></div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è &ndash;&gt;-->
<!--        <div class="form-section">-->
<!--            <h3 class="section-title">üè® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>-->
<!--            <div class="form-row">-->
<!--                <div class="form-group">-->
<!--                    <label for="hotelAddress">–ê–¥—Ä–µ—Å –æ—Ç–µ–ª—è (–¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞)</label>-->
<!--                    <input type="text"-->
<!--                           id="hotelAddress"-->
<!--                           th:field="*{hotelAddress}"-->
<!--                           class="form-control"-->
<!--                           th:classappend="${#fields.hasErrors('hotelAddress')} ? 'error' : ''"-->
<!--                           placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏ –∞–¥—Ä–µ—Å –æ—Ç–µ–ª—è">-->
<!--                    <div th:if="${#fields.hasErrors('hotelAddress')}"-->
<!--                         th:errors="*{hotelAddress}"-->
<!--                         class="error-message"></div>-->
<!--                </div>-->

<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ &ndash;&gt;-->
<!--        <div class="form-section">-->
<!--            <h3 class="section-title">‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏</h3>-->
<!--            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">-->
<!--                <div class="checkbox-group">-->
<!--                    <input type="checkbox"-->
<!--                           id="needsChildSeat"-->
<!--                           th:field="*{needsChildSeat}">-->
<!--                    <label for="needsChildSeat">–î–µ—Ç—Å–∫–∏–µ –∫—Ä–µ—Å–ª–∞ (+5 ‚Ç¨)</label>-->
<!--                </div>-->

<!--                <div class="checkbox-group">-->
<!--                    <input type="checkbox"-->
<!--                           id="needsNameGreeting"-->
<!--                           th:field="*{needsNameGreeting}">-->
<!--                    <label for="needsNameGreeting">–¢–∞–±–ª–∏—á–∫–∞ —Å –∏–º–µ–Ω–µ–º (+10 ‚Ç¨)</label>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; –û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è &ndash;&gt;-->
<!--        <div class="form-section">-->
<!--            <h3 class="section-title">üí¨ –û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è</h3>-->
<!--            <div class="form-group">-->
<!--                <label for="specialRequests">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è</label>-->
<!--                <textarea id="specialRequests"-->
<!--                          th:field="*{specialRequests}"-->
<!--                          class="form-control"-->
<!--                          th:classappend="${#fields.hasErrors('specialRequests')} ? 'error' : ''"-->
<!--                          rows="4"-->
<!--                          placeholder="–£–∫–∞–∂–∏—Ç–µ –ª—é–±—ã–µ –æ—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è"></textarea>-->
<!--                <div th:if="${#fields.hasErrors('specialRequests')}"-->
<!--                     th:errors="*{specialRequests}"-->
<!--                     class="error-message"></div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å &ndash;&gt;-->
<!--        <div class="price-summary">-->
<!--            <div style="display: flex; justify-content: space-between; align-items: center;">-->
<!--                <div>-->
<!--                    <div style="font-size: 1.1em; font-weight: 600;">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</div>-->
<!--                    <div style="font-size: 0.9em; color: #666;">–≤–∫–ª—é—á–∞—è –≤—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏</div>-->
<!--                </div>-->
<!--                <div style="font-size: 2em; font-weight: bold; color: #007bff;" id="totalPrice">-->
<!--                    <span th:text="${estimatedPrice ?: '120'} + ' ‚Ç¨'">120 ‚Ç¨</span>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->

<!--        &lt;!&ndash; –ö–Ω–æ–ø–∫–∏ &ndash;&gt;-->
<!--        <div class="submit-section">-->
<!--            <button type="button" onclick="window.history.back()" class="btn btn-secondary">-->
<!--                ‚Üê –ù–∞–∑–∞–¥-->
<!--            </button>-->
<!--            <button type="submit" class="btn btn-primary" id="submitBtn">-->
<!--                üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç—É—Ä-->
<!--            </button>-->
<!--        </div>-->
<!--    </form>-->
<!--</div>-->

<!--<script>-->
<!--    document.addEventListener('DOMContentLoaded', function() {-->
<!--        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã (—Å–µ–≥–æ–¥–Ω—è + 2 —á–∞—Å–∞)-->
<!--        const dateInput = document.getElementById('tourDateTime');-->
<!--        const now = new Date();-->
<!--        now.setHours(now.getHours() + 2);-->
<!--        dateInput.min = now.toISOString().slice(0, 16);-->

<!--        // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª—É–≥-->
<!--        const childSeatCheckbox = document.getElementById('needsChildSeat');-->
<!--        const nameGreetingCheckbox = document.getElementById('needsNameGreeting');-->
<!--        const totalPriceElement = document.getElementById('totalPrice');-->
<!--        const basePrice = parseFloat(/*[[${estimatedPrice}]]*/ '120');-->

<!--        function updatePrice() {-->
<!--            let totalPrice = basePrice;-->

<!--            if (childSeatCheckbox.checked) {-->
<!--                totalPrice += 5;-->
<!--            }-->

<!--            if (nameGreetingCheckbox.checked) {-->
<!--                totalPrice += 10;-->
<!--            }-->

<!--            totalPriceElement.innerHTML = totalPrice.toFixed(0) + ' ‚Ç¨';-->
<!--        }-->

<!--        childSeatCheckbox.addEventListener('change', updatePrice);-->
<!--        nameGreetingCheckbox.addEventListener('change', updatePrice);-->

<!--        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π-->
<!--        const form = document.querySelector('form');-->
<!--        const submitBtn = document.getElementById('submitBtn');-->

<!--        form.addEventListener('submit', function(e) {-->
<!--            submitBtn.disabled = true;-->
<!--            submitBtn.innerHTML = '‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è...';-->

<!--            // –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ-->
<!--            setTimeout(() => {-->
<!--                if (!form.checkValidity()) {-->
<!--                    submitBtn.disabled = false;-->
<!--                    submitBtn.innerHTML = 'üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç—É—Ä';-->
<!--                }-->
<!--            }, 100);-->
<!--        });-->

<!--        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞-->
<!--        const phoneInput = document.getElementById('customerPhone');-->
<!--        phoneInput.addEventListener('input', function(e) {-->
<!--            let value = e.target.value.replace(/\D/g, '');-->
<!--            if (value.length > 0 && !value.startsWith('+')) {-->
<!--                value = '+' + value;-->
<!--            }-->
<!--            e.target.value = value;-->
<!--        });-->

<!--        // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ-->
<!--        const firstInput = document.getElementById('tourDateTime');-->
<!--        if (firstInput && !firstInput.value) {-->
<!--            firstInput.focus();-->
<!--        }-->
<!--    });-->
<!--</script>-->

<!--<th:block th:replace="~{fragments/navbar :: navbar-script}"></th:block>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}">–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—É—Ä–∞</title>

    <style>
        /* CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ —Ç–æ–º –∂–µ —Å—Ç–∏–ª–µ, —á—Ç–æ –∏ –ø–µ—Ä–≤—ã–π —Ñ–∞–π–ª */
        :root {
            --primary-color: #D4AF37; /* –ó–æ–ª–æ—Ç–æ–π */
            --primary-hover: #F2D571;
            --secondary-color: #121212; /* –ü–æ—á—Ç–∏ —á–µ—Ä–Ω—ã–π */
            --dark-color: #000000;
            --grey-color: #1E1E1E;
            --light-grey: #2A2A2A;
            --light-color: #F5F5F5;
            --white-color: #FFFFFF;
            --accent-color: #1E1E1E;
            --transition: all 0.3s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Raleway', sans-serif;
            color: var(--light-color);
            background-color: var(--dark-color);
            line-height: 1.6;
        }

        a {
            text-decoration: none;
            color: var(--primary-color);
            transition: var(--transition);
        }

        a:hover {
            color: var(--primary-hover);
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Montserrat', sans-serif;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--white-color);
        }

        p {
            margin-bottom: 15px;
        }

        .booking-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 50px 20px;
            background: var(--dark-color);
        }

        /* –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ –≤ —Ç–µ–º–Ω–æ–º —Å—Ç–∏–ª–µ */
        .breadcrumbs {
            display: flex;
            flex-wrap: wrap;
            margin-bottom: 30px;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
        }

        .breadcrumbs a {
            color: rgba(255, 255, 255, 0.6);
            margin-right: 10px;
            position: relative;
        }

        .breadcrumbs a:after {
            content: "‚Üí";
            margin-left: 10px;
            color: rgba(255, 255, 255, 0.3);
        }

        .breadcrumbs a:hover {
            color: var(--primary-color);
        }

        .breadcrumbs span {
            color: var(--primary-color);
            margin-right: 10px;
        }

        .breadcrumbs span:after {
            content: "‚Üí";
            margin-left: 10px;
            color: rgba(255, 255, 255, 0.3);
        }

        .breadcrumbs span:last-child:after {
            content: "";
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç—É—Ä–µ */
        .booking-header {
            background-color: var(--secondary-color);
            padding: 30px;
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            border-left: 4px solid var(--primary-color);
        }

        .tour-summary {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 20px;
            align-items: center;
            margin-bottom: 20px;
        }

        .tour-info {
            display: flex;
            gap: 20px;
            margin: 10px 0;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
        }

        .tour-info span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .tour-description {
            color: rgba(255, 255, 255, 0.7);
            margin-top: 10px;
        }

        .price-summary {
            background-color: rgba(212, 175, 55, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .price-summary-content {
            text-align: center;
        }

        .price-label {
            font-size: 1.1em;
            color: rgba(255, 255, 255, 0.7);
        }

        .price-amount {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary-color);
            margin: 5px 0;
        }

        .price-note {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.6);
        }

        /* –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ */
        .vehicle-summary {
            background-color: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .vehicle-summary h3 {
            margin: 0 0 15px 0;
            color: var(--white-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .vehicle-info-grid {
            display: grid;
            grid-template-columns: auto 1fr auto;
            gap: 15px;
            align-items: center;
        }

        .vehicle-image {
            width: 80px;
            height: 60px;
            object-fit: cover;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .vehicle-details {
            color: var(--white-color);
        }

        .vehicle-name {
            font-weight: 600;
            font-size: 1.1em;
            margin-bottom: 5px;
        }

        .vehicle-specs {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9em;
        }

        /* –§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è */
        .booking-form {
            background-color: var(--secondary-color);
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .form-section {
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .form-section:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .section-title {
            font-size: 1.3em;
            font-weight: 600;
            color: var(--white-color);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--white-color);
            font-weight: 500;
            font-size: 14px;
        }

        .form-control {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            font-size: 16px;
            background-color: rgba(255, 255, 255, 0.05);
            color: var(--white-color);
            transition: var(--transition);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
        }

        .form-control.error {
            border-color: #dc3545;
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        textarea.form-control {
            resize: vertical;
            min-height: 100px;
        }

        .error-message {
            color: #dc3545;
            font-size: 14px;
            margin-top: 5px;
        }

        /* –ß–µ–∫–±–æ–∫—Å—ã */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary-color);
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        .checkbox-group label {
            color: var(--white-color);
            margin-bottom: 0;
            cursor: pointer;
        }

        .services-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            text-decoration: none;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: var(--dark-color);
        }

        .btn-primary:hover {
            background-color: var(--primary-hover);
            transform: translateY(-2px);
            color: var(--dark-color);
        }

        .btn-primary:disabled {
            background-color: rgba(212, 175, 55, 0.5);
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--white-color);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background-color: rgba(255, 255, 255, 0.2);
            color: var(--white-color);
        }

        .btn-change {
            font-size: 0.9em;
            padding: 8px 16px;
        }

        /* –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å */
        .final-price-summary {
            background-color: rgba(212, 175, 55, 0.15);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }

        .price-breakdown {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price-details {
            color: var(--white-color);
        }

        .price-title {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .price-description {
            font-size: 0.9em;
            color: rgba(255, 255, 255, 0.7);
        }

        .total-price {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary-color);
        }

        /* –ö–Ω–æ–ø–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ */
        .submit-section {
            display: flex;
            gap: 15px;
            justify-content: flex-end;
            margin-top: 30px;
        }

        /* –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö */
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-error {
            background-color: rgba(220, 53, 69, 0.15);
            color: #ff6b6b;
            border: 1px solid rgba(220, 53, 69, 0.3);
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 991px) {
            .tour-summary {
                grid-template-columns: 1fr;
            }

            .vehicle-info-grid {
                grid-template-columns: auto 1fr;
                gap: 15px;
            }

            .services-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 767px) {
            .booking-container {
                padding: 30px 15px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .submit-section {
                flex-direction: column;
            }

            .tour-info {
                flex-direction: column;
                gap: 10px;
            }

            .price-breakdown {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }
        }

        @media (max-width: 480px) {
            .booking-header {
                padding: 20px;
            }

            .booking-form {
                padding: 20px;
            }

            .vehicle-info-grid {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }
    </style>
    <th:block th:replace="~{fragments/navbar :: navbar-styles}"></th:block>
</head>
<body>
<th:block th:replace="~{fragments/navbar :: navbar('booking')}"></th:block>

<div class="booking-container">
    <!-- –•–ª–µ–±–Ω—ã–µ –∫—Ä–æ—à–∫–∏ -->
    <div class="breadcrumbs">
        <a href="/">–ì–ª–∞–≤–Ω–∞—è</a>
        <a href="/tours">–¢—É—Ä—ã</a>
        <a href="#" th:href="@{'/tours/' + ${tour.id}}" th:text="${tour.title}">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞</a>
        <span>–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö -->
    <div th:if="${error}" class="alert alert-error">
        <span th:text="${error}">–°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ</span>
    </div>

    <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç—É—Ä–µ -->
    <div class="booking-header">
        <div class="tour-summary">
            <div>
                <h1 th:text="${tour.title}">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–∞</h1>
                <div class="tour-info">
                    <span>üïê <span th:text="${tour.duration ?: '8 —á–∞—Å–æ–≤'}">8 —á–∞—Å–æ–≤</span></span>
                    <span>üë• –î–æ <span th:text="${tour.maxParticipants ?: '8'}">8</span> —á–µ–ª–æ–≤–µ–∫</span>
                    <span>üó£Ô∏è <span th:text="${tour.language ?: '–†—É—Å—Å–∫–∏–π –≥–∏–¥'}">–†—É—Å—Å–∫–∏–π –≥–∏–¥</span></span>
                </div>
                <p th:if="${tour.description}" th:text="${tour.description}" class="tour-description">
                    –û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–∞
                </p>
            </div>
            <div class="price-summary">
                <div class="price-summary-content">
                    <div class="price-label">–°—Ç–æ–∏–º–æ—Å—Ç—å —Ç—É—Ä–∞</div>
                    <div class="price-amount" th:text="${estimatedPrice ?: tour.price} + ' ‚Ç¨'">
                        120 ‚Ç¨
                    </div>
                    <div class="price-note">–∑–∞ –≥—Ä—É–ø–ø—É</div>
                </div>
            </div>
        </div>

        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∞–≤—Ç–æ–º–æ–±–∏–ª–µ -->
        <div class="vehicle-summary">
            <h3>üöó –í—ã–±—Ä–∞–Ω–Ω—ã–π –∞–≤—Ç–æ–º–æ–±–∏–ª—å</h3>
            <div class="vehicle-info-grid">
                <img th:if="${selectedVehicle.imageUrl}"
                     th:src="${selectedVehicle.imageUrl}"
                     th:alt="${selectedVehicle.brand + ' ' + selectedVehicle.model}"
                     class="vehicle-image">
                <div class="vehicle-details">
                    <div class="vehicle-name"
                         th:text="${selectedVehicle.brand + ' ' + selectedVehicle.model + (selectedVehicle.year != null ? ' (' + selectedVehicle.year + ')' : '')}">
                        Mercedes Vito (2023)
                    </div>
                    <div class="vehicle-specs">
                        <span th:text="${selectedVehicle.passengerCapacity + ' –º–µ—Å—Ç'}">7 –º–µ—Å—Ç</span>
                        <span th:if="${selectedVehicle.vehicleClass}"
                              th:text="' ‚Ä¢ ' + ${selectedVehicle.vehicleClass.displayName}"> ‚Ä¢ –ö–æ–º—Ñ–æ—Ä—Ç</span>
                    </div>
                </div>
                <a href="#" onclick="window.history.back()" class="btn btn-secondary btn-change">
                    –ò–∑–º–µ–Ω–∏—Ç—å
                </a>
            </div>
        </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <form th:action="@{/booking/tour/create}" th:object="${tourBookingDTO}" method="post" class="booking-form">

        <!-- –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è -->
        <input type="hidden" th:field="*{tourId}">
        <input type="hidden" th:field="*{vehicleId}">
        <input type="hidden" th:field="*{tripType}">

        <!-- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ç—É—Ä–∞ -->
        <div class="form-section">
            <h3 class="section-title">üìÖ –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Ç—É—Ä–∞</h3>
            <div class="form-group">
                <label for="tourDateTime">–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ç—É—Ä–∞ *</label>
                <input type="datetime-local"
                       id="tourDateTime"
                       th:field="*{tourDateTime}"
                       class="form-control"
                       th:classappend="${#fields.hasErrors('tourDateTime')} ? 'error' : ''"
                       required>
                <div th:if="${#fields.hasErrors('tourDateTime')}"
                     th:errors="*{tourDateTime}"
                     class="error-message"></div>
            </div>
        </div>

        <!-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤ -->
        <div class="form-section">
            <h3 class="section-title">üë• –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Å—Å–∞–∂–∏—Ä–æ–≤</h3>
            <div class="form-row">
                <div class="form-group">
                    <label for="adultCount">–í–∑—Ä–æ—Å–ª—ã–µ *</label>
                    <input type="number"
                           id="adultCount"
                           th:field="*{adultCount}"
                           class="form-control"
                           th:classappend="${#fields.hasErrors('adultCount')} ? 'error' : ''"
                           min="1" max="20" required>
                    <div th:if="${#fields.hasErrors('adultCount')}"
                         th:errors="*{adultCount}"
                         class="error-message"></div>
                </div>

                <div class="form-group">
                    <label for="childCount">–î–µ—Ç–∏ (–¥–æ 12 –ª–µ—Ç)</label>
                    <input type="number"
                           id="childCount"
                           th:field="*{childCount}"
                           class="form-control"
                           th:classappend="${#fields.hasErrors('childCount')} ? 'error' : ''"
                           min="0" max="10">
                    <div th:if="${#fields.hasErrors('childCount')}"
                         th:errors="*{childCount}"
                         class="error-message"></div>
                </div>
            </div>
        </div>

        <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="form-section">
            <h3 class="section-title">üìû –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <div class="form-group">
                <label for="customerName">–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è *</label>
                <input type="text"
                       id="customerName"
                       th:field="*{customerName}"
                       class="form-control"
                       th:classappend="${#fields.hasErrors('customerName')} ? 'error' : ''"
                       placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –∏ —Ñ–∞–º–∏–ª–∏—é" required>
                <div th:if="${#fields.hasErrors('customerName')}"
                     th:errors="*{customerName}"
                     class="error-message"></div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="customerEmail">Email *</label>
                    <input type="email"
                           id="customerEmail"
                           th:field="*{customerEmail}"
                           class="form-control"
                           th:classappend="${#fields.hasErrors('customerEmail')} ? 'error' : ''"
                           placeholder="your@email.com" required>
                    <div th:if="${#fields.hasErrors('customerEmail')}"
                         th:errors="*{customerEmail}"
                         class="error-message"></div>
                </div>

                <div class="form-group">
                    <label for="customerPhone">–¢–µ–ª–µ—Ñ–æ–Ω *</label>
                    <input type="tel"
                           id="customerPhone"
                           th:field="*{customerPhone}"
                           class="form-control"
                           th:classappend="${#fields.hasErrors('customerPhone')} ? 'error' : ''"
                           placeholder="+1234567890" required>
                    <div th:if="${#fields.hasErrors('customerPhone')}"
                         th:errors="*{customerPhone}"
                         class="error-message"></div>
                </div>
            </div>
        </div>

        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div class="form-section">
            <h3 class="section-title">üè® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
            <div class="form-group">
                <label for="hotelAddress">–ê–¥—Ä–µ—Å –æ—Ç–µ–ª—è (–¥–ª—è —Ç—Ä–∞–Ω—Å—Ñ–µ—Ä–∞)</label>
                <input type="text"
                       id="hotelAddress"
                       th:field="*{hotelAddress}"
                       class="form-control"
                       th:classappend="${#fields.hasErrors('hotelAddress')} ? 'error' : ''"
                       placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∏ –∞–¥—Ä–µ—Å –æ—Ç–µ–ª—è">
                <div th:if="${#fields.hasErrors('hotelAddress')}"
                     th:errors="*{hotelAddress}"
                     class="error-message"></div>
            </div>
        </div>

        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏ -->
        <div class="form-section">
            <h3 class="section-title">‚ú® –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª—É–≥–∏</h3>
            <div class="services-grid">
                <div class="checkbox-group">
                    <input type="checkbox"
                           id="needsChildSeat"
                           th:field="*{needsChildSeat}">
                    <label for="needsChildSeat">–î–µ—Ç—Å–∫–∏–µ –∫—Ä–µ—Å–ª–∞ (+5 ‚Ç¨)</label>
                </div>

                <div class="checkbox-group">
                    <input type="checkbox"
                           id="needsNameGreeting"
                           th:field="*{needsNameGreeting}">
                    <label for="needsNameGreeting">–¢–∞–±–ª–∏—á–∫–∞ —Å –∏–º–µ–Ω–µ–º (+10 ‚Ç¨)</label>
                </div>
            </div>
        </div>

        <!-- –û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è -->
        <div class="form-section">
            <h3 class="section-title">üí¨ –û—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è</h3>
            <div class="form-group">
                <label for="specialRequests">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è</label>
                <textarea id="specialRequests"
                          th:field="*{specialRequests}"
                          class="form-control"
                          th:classappend="${#fields.hasErrors('specialRequests')} ? 'error' : ''"
                          rows="4"
                          placeholder="–£–∫–∞–∂–∏—Ç–µ –ª—é–±—ã–µ –æ—Å–æ–±—ã–µ –ø–æ–∂–µ–ª–∞–Ω–∏—è –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è"></textarea>
                <div th:if="${#fields.hasErrors('specialRequests')}"
                     th:errors="*{specialRequests}"
                     class="error-message"></div>
            </div>
        </div>

        <!-- –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å -->
        <div class="final-price-summary">
            <div class="price-breakdown">
                <div class="price-details">
                    <div class="price-title">–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å:</div>
                    <div class="price-description">–≤–∫–ª—é—á–∞—è –≤—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —É—Å–ª—É–≥–∏</div>
                </div>
                <div class="total-price" id="totalPrice">
                    <span th:text="${estimatedPrice ?: '120'} + ' ‚Ç¨'">120 ‚Ç¨</span>
                </div>
            </div>
        </div>

        <!-- –ö–Ω–æ–ø–∫–∏ -->
        <div class="submit-section">
            <button type="button" onclick="window.history.back()" class="btn btn-secondary">
                ‚Üê –ù–∞–∑–∞–¥
            </button>
            <button type="submit" class="btn btn-primary" id="submitBtn">
                üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç—É—Ä
            </button>
        </div>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –¥–∞—Ç—ã (—Å–µ–≥–æ–¥–Ω—è + 2 —á–∞—Å–∞)
        const dateInput = document.getElementById('tourDateTime');
        const now = new Date();
        now.setHours(now.getHours() + 2);
        dateInput.min = now.toISOString().slice(0, 16);

        // –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É—Å–ª—É–≥
        const childSeatCheckbox = document.getElementById('needsChildSeat');
        const nameGreetingCheckbox = document.getElementById('needsNameGreeting');
        const totalPriceElement = document.getElementById('totalPrice');
        const basePrice = parseFloat(/*[[${estimatedPrice}]]*/ '120');

        function updatePrice() {
            let totalPrice = basePrice;

            if (childSeatCheckbox.checked) {
                totalPrice += 5;
            }

            if (nameGreetingCheckbox.checked) {
                totalPrice += 10;
            }

            totalPriceElement.innerHTML = totalPrice.toFixed(0) + ' ‚Ç¨';
        }

        childSeatCheckbox.addEventListener('change', updatePrice);
        nameGreetingCheckbox.addEventListener('change', updatePrice);

        // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º—ã –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
        const form = document.querySelector('form');
        const submitBtn = document.getElementById('submitBtn');

        form.addEventListener('submit', function(e) {
            submitBtn.disabled = true;
            submitBtn.innerHTML = '‚è≥ –°–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è...';

            // –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ –Ω–µ–≤–∞–ª–∏–¥–Ω–∞, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            setTimeout(() => {
                if (!form.checkValidity()) {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = 'üéØ –ó–∞–±—Ä–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç—É—Ä';
                }
            }, 100);
        });

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        const phoneInput = document.getElementById('customerPhone');
        phoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 0 && !value.startsWith('+')) {
                value = '+' + value;
            }
            e.target.value = value;
        });

        // –ê–≤—Ç–æ—Ñ–æ–∫—É—Å –Ω–∞ –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        const firstInput = document.getElementById('tourDateTime');
        if (firstInput && !firstInput.value) {
            firstInput.focus();
        }

        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Ñ–æ—Ä–º—ã
        const formSections = document.querySelectorAll('.form-section');
        formSections.forEach((section, index) => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(20px)';
            section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';

            setTimeout(() => {
                section.style.opacity = '1';
                section.style.transform = 'translateY(0)';
            }, index * 100);
        });
    });
</script>

<th:block th:replace="~{fragments/navbar :: navbar-script}"></th:block>
</body>
</html>